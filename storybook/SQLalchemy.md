# SQLAlchemy: `joinedload` vs `selectinload` ‚Äî –í–∏–∑—É–∞–ª—å–Ω–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞

## üéØ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ (Rule of Thumb)

*   **`selectinload`** ‚Üí –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π **"–û–¥–∏–Ω-–∫–æ-–ú–Ω–æ–≥–∏–º"**.
    *   *–ü—Ä–∏–º–µ—Ä: –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–¥–Ω–æ–≥–æ **–ê–≤—Ç–æ—Ä–∞** –∏ –µ–≥–æ **–º–Ω–æ–≥–æ –ö–Ω–∏–≥**.*
    *   –í–∏–∑—É–∞–ª—å–Ω–æ: `–ê–≤—Ç–æ—Ä üë®‚Äçüé®  ->  [–ö–Ω–∏–≥–∞, –ö–Ω–∏–≥–∞, –ö–Ω–∏–≥–∞] üìö`

*   **`joinedload`** ‚Üí –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ **"–ú–Ω–æ–≥–∏–µ-–∫-–û–¥–Ω–æ–º—É"**.
    *   *–ü—Ä–∏–º–µ—Ä: –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–Ω–æ–≥–æ **–ö–Ω–∏–≥** –∏ –¥–ª—è –∫–∞–∂–¥–æ–π –µ—ë –æ–¥–Ω–æ–≥–æ **–ê–≤—Ç–æ—Ä–∞**.*
    *   –í–∏–∑—É–∞–ª—å–Ω–æ: `–ö–Ω–∏–≥–∞ üìö ->  –ê–≤—Ç–æ—Ä üë®‚Äçüé®`

---

## `selectinload` ‚Äî –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è "–û–¥–∏–Ω-–∫–æ-–ú–Ω–æ–≥–∏–º" (üë®‚Äçüé® ‚Üí üìö)

–ó–∞–≥—Ä—É–∂–∞–µ–º **–ê–≤—Ç–æ—Ä–∞** –∏ –µ–≥–æ **–ö–Ω–∏–≥–∏**.

```python
from sqlalchemy.orm import selectinload
# –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–≤—Ç–æ—Ä–æ–≤ –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö ‚Äî —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥
stmt = select(Author).options(selectinload(Author.books))
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (2 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞)

1Ô∏è‚É£ **–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è "–≥–ª–∞–≤–Ω—ã–µ" –æ–±—ä–µ–∫—Ç—ã (–ê–≤—Ç–æ—Ä—ã):**
```sql
-- –ó–∞–ø—Ä–æ—Å 1:
SELECT authors.id, authors.name FROM authors;
```
<p align="center">‚¨áÔ∏è</p>

2Ô∏è‚É£ **–ó–∞—Ç–µ–º –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (–ö–Ω–∏–≥–∏) –¥–ª—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤:**
```sql
-- –ó–∞–ø—Ä–æ—Å 2:
SELECT books.id, books.title, books.author_id
FROM books WHERE books.author_id IN (id1, id2, ...);
```

**‚úÖ –ü–ª—é—Å—ã:**
*   **–ë—ã—Å—Ç—Ä–æ:** –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
*   **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ:** –î–≤–∞ –ø—Ä–æ—Å—Ç—ã—Ö –∏ –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ.

---

## `joinedload` ‚Äî –î–ª—è "–ú–Ω–æ–≥–∏–µ-–∫-–û–¥–Ω–æ–º—É" –∏ –ø—Ä–æ–±–ª–µ–º—ã —Å "–û–¥–∏–Ω-–∫–æ-–ú–Ω–æ–≥–∏–º"

`joinedload` –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–∏–Ω `LEFT OUTER JOIN`.

### üëç –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: "–ú–Ω–æ–≥–∏–µ-–∫-–û–¥–Ω–æ–º—É" (üìö ‚Üí üë®‚Äçüé®)

–ó–∞–≥—Ä—É–∂–∞–µ–º **–ö–Ω–∏–≥–∏** –∏ –∏—Ö **–ê–≤—Ç–æ—Ä–æ–≤**.

```python
from sqlalchemy.orm import joinedload
# –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–Ω–∏–≥–∏ –∏ –¥–ª—è –∫–∞–∂–¥–æ–π –µ—ë –∞–≤—Ç–æ—Ä–∞
stmt = select(Book).options(joinedload(Book.author))
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç (1 –∑–∞–ø—Ä–æ—Å):** –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å, –≥–¥–µ –∫–∞–∂–¥–∞—è –∫–Ω–∏–≥–∞ —Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –∞–≤—Ç–æ—Ä–∞. –ß–∏—Å—Ç–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.

```sql
SELECT books.*, authors.* FROM books LEFT OUTER JOIN authors ON ...
```
**‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å, –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.**

### üëé –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: "–û–¥–∏–Ω-–∫–æ-–ú–Ω–æ–≥–∏–º" (üë®‚Äçüé® ‚Üí üìö)

–ó–∞–≥—Ä—É–∂–∞–µ–º **–ê–≤—Ç–æ—Ä–∞** –∏ –µ–≥–æ **–ö–Ω–∏–≥–∏** —Å –ø–æ–º–æ—â—å—é `joinedload`.

```python
# –ù–ï –î–ï–õ–ê–ô–¢–ï –¢–ê–ö:
stmt = select(Author).options(joinedload(Author.books))
```
**–ü—Ä–æ–±–ª–µ–º–∞: –î–µ–∫–∞—Ä—Ç–æ–≤–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)**

–ï—Å–ª–∏ —É –∞–≤—Ç–æ—Ä–∞ 2 –∫–Ω–∏–≥–∏, `JOIN` —Å–æ–∑–¥–∞—Å—Ç 2 —Å—Ç—Ä–æ–∫–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ, –¥—É–±–ª–∏—Ä—É—è –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∞:

| authors.id | authors.name | books.id | books.title      |
|:----------:|:------------:|:--------:|:-----------------|
| 1          | "Tolkien"    | 101      | "The Hobbit"     |
| **1**      | **"Tolkien"**| 102      | "The Fellowship" | ‚¨ÖÔ∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ!**

**‚ùå –ú–∏–Ω—É—Å—ã:**
*   **–ú–µ–¥–ª–µ–Ω–Ω–æ:** –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –º–Ω–æ–≥–æ –ª–∏—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
*   **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ:** –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î –∏ —Å–µ—Ç—å.

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞-—à–ø–∞—Ä–≥–∞–ª–∫–∞

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è | –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç | –õ—É—á—à–µ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ (–∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å) |
|:--- |:--- |:--- |
| **`selectinload`** | `SELECT ...` + `SELECT ... IN (...)`<br/>(2+ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞) | **–û–¥–∏–Ω-–∫–æ-–ú–Ω–æ–≥–∏–º**<br/>`–ê–≤—Ç–æ—Ä üë®‚Äçüé® ‚Üí üìö –ö–Ω–∏–≥–∏` |
| **`joinedload`** | `LEFT OUTER JOIN`<br/>(1 –±–æ–ª—å—à–æ–π –∑–∞–ø—Ä–æ—Å) | **–ú–Ω–æ–≥–∏–µ-–∫-–û–¥–Ω–æ–º—É**<br/>`–ö–Ω–∏–≥–∞ üìö ‚Üí üë®‚Äçüé® –ê–≤—Ç–æ—Ä` |