# TODO: –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Ä–∞–±–æ—á–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π. –≠—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ ‚Äî –∏–¥–µ–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

### ‚≠ê –í–∞–∂–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏

*   [ ] **–ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ç–µ—Å—Ç—ã.**
    *   **–ó–∞–¥–∞—á–∞:** –¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ API —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–µ.
    *   **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
        1.  –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `tests/test_router.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å `201` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
        2.  –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç `test_registration_login_and_get_me` (–∫–æ–¥ –µ—Å—Ç—å –≤ –Ω–∞—à–µ–º –¥–∏–∞–ª–æ–≥–µ), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å—é —Ü–µ–ø–æ—á–∫—É: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -> –ª–æ–≥–∏–Ω -> –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.
        3.  –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏: –ø–æ–ø—ã—Ç–∫–∞ –ª–æ–≥–∏–Ω–∞ —Å –Ω–µ–≤–µ—Ä–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º, –ø–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ `/me` –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ (–æ–∂–∏–¥–∞–µ–º 401).
    *   **–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:** –•–æ—Ä–æ—à–∏–µ —Ç–µ—Å—Ç—ã ‚Äî –≤–∞—à–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –æ—Ç –±—É–¥—É—â–∏—Ö –æ—à–∏–±–æ–∫ –ø—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

*   [ ] **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.**
    *   **–ó–∞–¥–∞—á–∞:** –ó–∞–º–µ–Ω–∏—Ç—å `allow_origins=["*"]` –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –≤–∞—à–µ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.
    *   **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
        1.  –î–æ–±–∞–≤–∏—Ç—å –≤ `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `ALLOWED_ORIGINS="http://localhost:3000,https://your-frontend-domain.com"`.
        2.  –í `src/core/config.py` –¥–æ–±–∞–≤–∏—Ç—å `ALLOWED_ORIGINS: list[str] = []` –≤ –∫–ª–∞—Å—Å `Settings`.
        3.  –í `src/main.py` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `allow_origins=settings.ALLOWED_ORIGINS`.
    *   **–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:** –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–∞—à–µ–º—É API —Å–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–∞–π—Ç–æ–≤.

### üí° –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

*   [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è –ø–æ—Å—Ç–æ–≤.**
    *   **–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`PATCH /posts/{post_id}`) –∏ —É–¥–∞–ª–µ–Ω–∏—è (`DELETE /posts/{post_id}`) –ø–æ—Å—Ç–æ–≤.
    *   **–í–∞–∂–Ω–æ:** –≠—Ç–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞—â–∏—â–µ–Ω—ã. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω—è—Ç—å/—É–¥–∞–ª—è—Ç—å **—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏** –ø–æ—Å—Ç—ã. –í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å `current_user_id` –∏–∑ —Ç–æ–∫–µ–Ω–∞ –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –µ–≥–æ —Å `post.user_id`.

*   [ ] **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–∫–∏ `sqlalchemy.exc.NoResultFound`.**
    *   **–ó–∞–¥–∞—á–∞:** –°–µ–π—á–∞—Å, –µ—Å–ª–∏ –≤ —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ `get_single_user` –Ω–µ –±—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, `result.scalars().one()` –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É 500.
    *   **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
        1.  –í `src/core/exceptions.py` –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è `NoResultFound`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `404 Not Found`.
        2.  –í —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.one_or_none()` –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ `user is not None`. –ï—Å–ª–∏ `user` `None`, –º–æ–∂–Ω–æ –±—Ä–æ—Å–∞—Ç—å `HTTPException(404)`.

*   [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –≤—ã—Ö–æ–¥–∞ (`/auth/logout`).**
    *   **–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–¥–∞–ª—è–µ—Ç `http-only` cookie.
    *   **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:** –°–æ–∑–¥–∞—Ç—å `POST /auth/logout`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `Response` –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `response.delete_cookie(settings.JWT_ACCESS_COOKIE)`.